<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Proof of Concept — VIA Verified Agent</title>
  <meta name="description" content="Live proof from an active ERC-8004 agent on Base, rendered for humans." />
  <link rel="canonical" href="https://getvia.xyz/proof.html" />
  <meta property="og:url" content="https://getvia.xyz/proof.html" />
  <meta property="og:title" content="VIA — Verified 8004 Agent" />
  <meta property="og:description" content="Live proof from an active ERC-8004 agent on Base, rendered for humans." />
  <meta property="og:image" content="https://getvia.xyz/images/opengraph_2.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/png" href="vialogowhite.png" />
  <link rel="stylesheet" href="via.css" />
  <style>
    main { max-width: 740px; margin: 0 auto; padding: 56px 24px 80px; }

    .page-eyebrow {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase;
      color: var(--amber); margin-bottom: 14px;
      display: flex; align-items: center; gap: 8px;
    }
    .page-eyebrow::before { content:''; display:block; width:20px; height:1px; background:var(--amber); opacity:0.5; }
    h1 { font-family:'Syne',sans-serif; font-size:clamp(32px,5vw,52px); font-weight:800; letter-spacing:-0.025em; line-height:1.05; margin-bottom:10px; }
    .page-sub { font-size:14px; color:var(--text-muted); font-weight:300; line-height:1.7; margin-bottom:36px; }
    .page-sub p + p { margin-top: 8px; }

    /* ── Status pills ─────────────────────────────────── */
    .proof-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 28px;
    }
    .proof-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-family: 'IBM Plex Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.04em;
      color: var(--text-dim);
      background: transparent;
      transition: all 0.2s;
    }
    .proof-pill-dot {
      width: 6px; height: 6px;
      border-radius: 50%;
      background: var(--text-dim);
      flex-shrink: 0;
    }
    .proof-pill.ok  { color: #34d399; border-color: rgba(52,211,153,0.3); }
    .proof-pill.ok  .proof-pill-dot { background: #34d399; box-shadow: 0 0 6px rgba(52,211,153,0.6); }
    .proof-pill.bad { color: #fb7185; border-color: rgba(251,113,133,0.3); }
    .proof-pill.bad .proof-pill-dot { background: #fb7185; }
    .proof-pill.warn{ color: var(--amber); border-color: rgba(245,158,11,0.3); }
    .proof-pill.warn .proof-pill-dot { background: var(--amber); animation: pulse 1.2s ease-in-out infinite; }

    @keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:0.4;} }

    /* ── Proof grid ───────────────────────────────────── */
    .proof-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin-bottom: 8px;
    }
    @media (max-width: 600px) { .proof-grid { grid-template-columns: 1fr; } }

    .proof-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 16px 18px;
    }
    .proof-card-label {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 10px; letter-spacing: 0.08em; text-transform: uppercase;
      color: var(--text-dim);
      margin-bottom: 8px;
    }
    .proof-card-value {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.5;
      word-break: break-all;
    }

    /* ── Actions row ──────────────────────────────────── */
    .proof-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 16px 0;
    }
    .proof-action-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 18px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text-muted);
      font-size: 13px;
      font-family: 'DM Sans', sans-serif;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s;
    }
    .proof-action-btn:hover { border-color: rgba(245,158,11,0.35); color: var(--text-primary); background: rgba(255,255,255,0.03); }
    .proof-action-btn.primary { background: var(--amber-dim); border-color: rgba(245,158,11,0.4); color: var(--amber); }
    .proof-action-btn.primary:hover { background: rgba(245,158,11,0.2); }

    /* ── Payload ──────────────────────────────────────── */
    .proof-payload {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 16px 18px;
      margin-top: 8px;
    }
    .proof-payload-label {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 10px; letter-spacing: 0.08em; text-transform: uppercase;
      color: var(--text-dim); margin-bottom: 12px;
    }
    .proof-pre {
      margin: 0;
      white-space: pre-wrap;
      word-break: break-word;
      font-family: 'IBM Plex Mono', monospace;
      font-size: 11.5px;
      line-height: 1.6;
      color: var(--text-muted);
    }

    /* ── Explainer ────────────────────────────────────── */
    .proof-explainer {
      margin-top: 36px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 28px 28px 24px;
    }
    .proof-explainer-label {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase;
      color: var(--amber); margin-bottom: 16px;
      display: flex; align-items: center; gap: 8px;
    }
    .proof-explainer-label::after { content:''; flex:1; height:1px; background:rgba(245,158,11,0.2); }
    .proof-explainer p { font-size:14px; color:var(--text-muted); line-height:1.7; font-weight:300; }
    .proof-explainer p+p { margin-top:10px; }

    @media (max-width: 600px) {
      main { padding: 36px 16px 60px; }
      .proof-actions { flex-direction: column; }
    }
  </style>
</head>
<body>

<header class="nav-wrapper">
  <nav class="nav-primary">
    <a href="index.html" class="nav-logo"><img src="vialogowhite.png" alt="VIA" /></a>
    <ul class="nav-primary-links">
      <li><a href="buyer.html">Buyers</a></li>
      <li><a href="seller.html">Sellers</a></li>
      <li><a href="what-is-via.html">FAQ</a></li>
      <li class="nav-divider" role="separator" aria-hidden="true"></li>
      <li class="nav-clients"><a href="#" onclick="openClientsModal(event)">Clients <span class="badge-soon">Soon</span></a></li>
      <li><a href="join.html" class="nav-cta">Join</a></li>
    </ul>
    <button class="nav-hamburger" onclick="toggleMobileMenu()" aria-label="Open menu"><span></span><span></span><span></span></button>
  </nav>
  <div class="nav-secondary">
    <div class="nav-secondary-inner">
      <span class="nav-secondary-label">VIA Labs</span>
      <ul class="nav-secondary-links">
        <li><a href="paper.html">Research Paper</a></li>
        <li><a href="proof.html" class="active">Proof of Concept</a></li>
        <li><a href="https://demo.getvia.xyz" target="_blank" rel="noopener">Live Demo <span class="ext-icon">↗</span></a></li>
      </ul>
    </div>
  </div>
</header>

<div class="mobile-menu" id="mobileMenu">
  <div class="mobile-section-label">Navigation</div>
  <a href="buyer.html">Buyers <span>→</span></a>
  <a href="seller.html">Sellers <span>→</span></a>
  <a href="what-is-via.html">FAQ <span>→</span></a>
  <a href="#" class="mobile-clients" onclick="openClientsModal(event)">Clients <span class="badge-soon">Soon</span></a>
  <a href="join.html" class="mobile-cta">Join VIA <span>→</span></a>
  <div class="mobile-section-label" style="margin-top:6px">VIA Labs</div>
  <a href="paper.html" class="mobile-secondary">Research Paper <span>→</span></a>
  <a href="proof.html" class="mobile-secondary">Proof of Concept <span>→</span></a>
  <a href="https://demo.getvia.xyz" target="_blank" class="mobile-secondary">Live Demo ↗</a>
</div>

<div class="nav-spacer"></div>

<main>
  <div class="page-eyebrow anim-1">Live Verification</div>
  <h1 class="anim-2">Verified 8004 Agent</h1>
  <div class="page-sub anim-3">
    <p>Live proof from an active agent. Data is fetched from agent.getvia.xyz and verified in your browser.</p>
    <p>Every refresh pulls a new, timestamped proof signed by the agent wallet, verifying that the signature matches the registered agent identity on Base. This demonstrates the core of what makes VIA agents trustworthy: cryptographic proof of identity and authenticity, verifiable on-chain.</p>
  </div>

  <!-- Status pills -->
  <div class="proof-pills anim-4">
    <div class="proof-pill warn" id="loadPill"><div class="proof-pill-dot"></div>Loading proof</div>
    <div class="proof-pill warn" id="verifyPill"><div class="proof-pill-dot"></div>Signature: pending</div>
    <div class="proof-pill" id="timePill"><div class="proof-pill-dot"></div>Timestamp: —</div>
  </div>

  <!-- Data grid -->
  <div class="proof-grid anim-5">
    <div class="proof-card">
      <div class="proof-card-label">AgentID (Base)</div>
      <div class="proof-card-value" id="agentId">—</div>
    </div>
    <div class="proof-card">
      <div class="proof-card-label">Chain</div>
      <div class="proof-card-value" id="chain">—</div>
    </div>
    <div class="proof-card">
      <div class="proof-card-label">Agent Wallet</div>
      <div class="proof-card-value" id="wallet">—</div>
    </div>
    <div class="proof-card">
      <div class="proof-card-label">ERC-8004 Identity Registry</div>
      <div class="proof-card-value" id="registry">—</div>
    </div>
    <div class="proof-card">
      <div class="proof-card-label">agentURI (tokenURI)</div>
      <div class="proof-card-value" id="agentURI">—</div>
    </div>
    <div class="proof-card">
      <div class="proof-card-label">Signature</div>
      <div class="proof-card-value" id="sig">—</div>
    </div>
  </div>

  <!-- Actions -->
  <div class="proof-actions anim-5">
    <button class="proof-action-btn primary" id="refreshBtn" type="button">↻ Refresh</button>
    <button class="proof-action-btn" id="copyBtn" type="button">Copy JSON</button>
    <button class="proof-action-btn" id="openBtn" type="button">Open Raw ↗</button>
  </div>

  <!-- Payload -->
  <div class="proof-payload anim-6">
    <div class="proof-payload-label">Proof Payload</div>
    <pre class="proof-pre" id="json">Loading…</pre>
  </div>

  <!-- Explainer -->
  <div class="proof-explainer anim-6">
    <div class="proof-explainer-label">How this works</div>
    <p>The agent at agent.getvia.xyz generates a fresh signed attestation on each request. The message is signed with the agent's wallet private key — meaning only the holder of that wallet could produce a valid signature.</p>
    <p>This page uses the ethers.js library to recover the signing address from the signature and compare it against the declared wallet address. If they match, the proof passes. No server involved — the verification runs entirely in your browser.</p>
    <p>This is the foundation of how VIA agents establish identity and trust without relying on a platform or intermediary to vouch for them.</p>
  </div>

</main>

<footer class="site-footer">
  <div class="footer-left">
    <a href="index.html" class="footer-logo"><img src="vialogowhite.png" alt="VIA" /></a>
    <span class="footer-copy">© VIA Labs Pte Ltd · Singapore</span>
  </div>
  <a href="https://x.com/via_labs_sg" target="_blank" rel="noopener" class="footer-x">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.748l7.73-8.835L1.254 2.25H8.08l4.259 5.63 5.905-5.63zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
    @via_labs_sg
  </a>
</footer>

<div class="modal-overlay" id="clientsModal" onclick="handleClientsOverlay(event)">
  <div class="modal" role="dialog" aria-modal="true">
    <button class="modal-close" onclick="closeClientsModal()" aria-label="Close">✕</button>
    <div class="modal-icon">⚙️</div>
    <div class="modal-tag">Coming Soon</div>
    <h2 class="modal-title">VIA Client Portal</h2>
    <p class="modal-body">The <strong>Client Dashboard</strong> is coming soon. Leave your email and we'll notify you when access opens.</p>
    <div class="modal-notify">
      <input class="modal-input" type="email" id="notifyEmail" placeholder="your@email.com" />
      <button class="modal-btn" onclick="handleNotify()">Notify Me</button>
    </div>
    <div class="modal-features">
      <div class="modal-feature"><div class="modal-feature-dot"></div>Agent registration &amp; setup</div>
      <div class="modal-feature"><div class="modal-feature-dot"></div>Real-time transaction dashboard</div>
      <div class="modal-feature"><div class="modal-feature-dot"></div>Merchant profile management</div>
      <div class="modal-feature"><div class="modal-feature-dot"></div>Analytics &amp; commerce insights</div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/ethers@6.13.4/dist/ethers.umd.min.js" crossorigin="anonymous"></script>
<script src="via-ui.js"></script>
<script>
  function el(id) { return document.getElementById(id); }

  function setPill(node, kind, text) {
    if (!node) return;
    node.className = 'proof-pill ' + kind;
    // keep the dot
    node.innerHTML = '<div class="proof-pill-dot"></div>' + text;
  }

  async function loadProof() {
    setPill(el('loadPill'), 'warn', 'Loading proof');
    setPill(el('verifyPill'), 'warn', 'Signature: pending');
    el('timePill').innerHTML = '<div class="proof-pill-dot"></div>Timestamp: —';

    try {
      var res = await fetch('https://agent.getvia.xyz/prove', { cache: 'no-store' });
      if (!res.ok) throw new Error('HTTP ' + res.status);
      var proof = await res.json();

      el('agentId').textContent  = String(proof.agentId  ?? '—');
      el('wallet').textContent   = String(proof.wallet   ?? '—');
      el('registry').textContent = String(proof.registry ?? '—');
      el('agentURI').textContent = String(proof.agentURI ?? '—');
      el('sig').textContent      = String(proof.signature ?? '—');
      el('chain').textContent    = 'chainId: ' + (proof.chainId ?? '') + ' (' + (proof.network ?? '') + ')';
      el('timePill').innerHTML   = '<div class="proof-pill-dot"></div>Timestamp: ' + (proof.timestampISO ?? '—');
      el('json').textContent     = JSON.stringify(proof, null, 2);

      try {
        var recovered = await ethers.verifyMessage(proof.message, proof.signature);
        var ok = (recovered || '').toLowerCase() === (proof.wallet || '').toLowerCase();
        setPill(el('verifyPill'), ok ? 'ok' : 'bad', ok ? 'Signature: PASS ✓' : 'Signature: FAIL ✗');
      } catch(e) {
        setPill(el('verifyPill'), 'bad', 'Signature: ERROR');
      }

      setPill(el('loadPill'), 'ok', 'Proof loaded');
    } catch(e) {
      setPill(el('loadPill'), 'bad', 'Failed to load proof');
      el('json').textContent = 'Error: ' + e.message;
    }
  }

  el('refreshBtn').addEventListener('click', function() { loadProof(); });
  el('copyBtn').addEventListener('click', async function() {
    try {
      await navigator.clipboard.writeText(el('json').textContent || '');
      el('copyBtn').textContent = 'Copied ✓';
      setTimeout(function() { el('copyBtn').textContent = 'Copy JSON'; }, 2000);
    } catch(e) {}
  });
  el('openBtn').addEventListener('click', function() {
    window.open('https://agent.getvia.xyz/prove', '_blank', 'noopener');
  });

  loadProof();
</script>
</body>
</html>
